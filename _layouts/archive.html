---
layout: page
---
{% assign page_type = page.path | split: "/" | compact | first %}
{% case page_type %}
  {% when "category" %}
    {% assign site_posts = site.posts | where_exp: "item", "item.categories contains page.title" %}
  {% when "tag" %}
    {% assign site_posts = site.posts | where_exp: "item", "item.tags contains page.title" %}
  {% else %}
    {% assign site_posts = site.posts %}
{% endcase %}

{% for post in site_posts %}
  {% assign post_year = post.date | date: '%Y' %}
  {% if year != post_year %}
    {% unless forloop.first %}
      </ul>
    {% endunless %}
    {% assign year = post_year %}
    <h2>{{ year }}</h2>
    <ul>
  {% endif %}
  <li>
    <h3 class="post-entry">
      <a href="{{ post.url | relative_url }}">
        {{ post.title }}
        <small>{{ post.date | date: "%B %-d, %Y" }}</small>
      </a>
    </h3>
  </li>
  {% if forloop.last %}
    </ul>
  {% endif %}
{% endfor %}
